!function(){var e={562:function(){(new class{constructor(){this.chatContainer=document.querySelector(".chat-container"),this.chat=document.querySelector(".chat"),this.messageForm=document.querySelector(".message-form"),this.messageInput=document.querySelector(".message-input"),this.loginContainer=document.querySelector(".login-container"),this.loginForm=document.querySelector(".login-form"),this.loginInput=document.querySelector(".login-input"),this.loginLabel=document.querySelector(".login-label"),this.usersListContainer=document.querySelector(".users"),this.usersList=document.querySelector(".users-list"),this.url="wss://see-ws-backend.herokuapp.com/",this.user=null}init(){this.wsConnect(),this.messageForm.addEventListener("submit",(e=>this.sendMessage(e))),this.loginForm.addEventListener("submit",(e=>this.login(e)))}login(e){e.preventDefault(),this.user=this.loginInput.value,this.ws.send(JSON.stringify({login:this.loginInput.value})),this.loginInput.value=""}drawUsers(e){this.usersList.innerHTML+=`\n          <li>${e}</li>\n        `}changeName(){this.loginLabel.style.color="red",this.loginInput.classList.add("invalid"),this.loginLabel.innerHTML="Ooops! Guess you should choose another nick"}nameChecked(){this.loginContainer.classList.add("hidden"),this.loginLabel.style.color="inherit",this.loginInput.classList.remove("invalid"),this.loginLabel.innerHTML="Type your nick here"}drawMessagesList(e,s,t,n){let i="",o=e;e===n?(i=" you",o="You"):"Chat Bot"===e&&(i=" bot"),this.chat.innerHTML+=`\n        <div class="message${i}">\n        <span>${o}, ${t}</span>\n        ${s}\n        </div>\n        `}sendMessage(e){e.preventDefault(),this.ws.send(JSON.stringify({message:this.messageInput.value})),this.messageInput.value=""}wsConnect(){this.ws=new WebSocket(this.url);const{ws:e}=this;e.binaryType="blob",e.addEventListener("open",(()=>{console.log("connection opened")})),e.addEventListener("close",(()=>{console.log("connection closed")})),e.addEventListener("message",(e=>{const s=JSON.parse(e.data);s?(this.usersListContainer.classList.remove("hidden"),this.chatContainer.classList.remove("hidden"),this.nameChecked(),s.users&&s.messages?(this.chat.innerHTML="",this.usersList.innerHTML="",s.messages.forEach((e=>{this.drawMessagesList(e.nickname,e.msg,e.date,this.user)})),s.users.forEach((e=>{this.drawUsers(e.name)}))):s[0].msg&&(this.chat.innerHTML="",s.forEach((e=>{this.drawMessagesList(e.nickname,e.msg,e.date,this.user)})))):this.changeName()}))}}).init()}},s={};function t(n){var i=s[n];if(void 0!==i)return i.exports;var o=s[n]={exports:{}};return e[n](o,o.exports,t),o.exports}t.n=function(e){var s=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(s,{a:s}),s},t.d=function(e,s){for(var n in s)t.o(s,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:s[n]})},t.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)},function(){"use strict";t(562)}()}();